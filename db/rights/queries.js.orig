const knex = require('../knex');

<<<<<<< HEAD
const getData = ({name, system}) => ({
  name, system
});

=======
>>>>>>> e75c949... #19 users
module.exports = {
  getAll(){
    return knex('rights');
  },
  getOne(id){
    return knex('rights').where('id', id).first();
  },
  create(right){
<<<<<<< HEAD
    const data = getData(right);
    if(right.id !== undefined) data.id = right.id;
    return knex("rights").insert(data, 'id').then(IDs=>this.getOne(IDs[0]));
  },
  update(id, right){
    return knex("rights").where('id', id).update(getData(right)).then(()=>this.getOne(id));
=======
    return knex("rights").insert(right, 'id').then(IDs=>this.getOne(IDs[0]));
  },
  update(id, right){
    return knex("rights").where('id', id).update(right).then(()=>this.getOne(id));
>>>>>>> e75c949... #19 users
  },
  delete(id){
    return knex('rights').where('id', id).del()
  }
};